<!DOCTYPE html>
<html>
<head>
    <title>Test Client KhÃ¡c</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f8ff; }
        .container { max-width: 500px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        button { padding: 10px 20px; margin: 5px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #45a049; }
        #messages { border: 1px solid #ddd; height: 200px; overflow-y: auto; padding: 10px; margin: 10px 0; background: #fafafa; }
        input { width: 70%; padding: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸš€ Test Client Tá»« File KhÃ¡c</h2>
        <p>File nÃ y chá»©ng minh server cÃ³ thá»ƒ káº¿t ná»‘i vá»›i báº¥t ká»³ client nÃ o!</p>
        
        <button onclick="connect()">Káº¿t ná»‘i</button>
        <button onclick="disconnect()">Ngáº¯t káº¿t ná»‘i</button>
        <button onclick="sendPing()">Ping</button>
        
        <br><br>
        <input type="text" id="messageInput" placeholder="Nháº­p tin nháº¯n..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button onclick="sendMessage()">Gá»­i tá»« Client KhÃ¡c</button>
        
        <div id="messages"></div>
    </div>

    <script>
        let ws = null;
        
        function connect() {
            ws = new WebSocket('ws://localhost:3001');
            
            ws.onopen = () => {
                addMessage('âœ… Káº¿t ná»‘i thÃ nh cÃ´ng tá»« file test-client.html!');
            };
            
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                addMessage(`ğŸ“¨ ${data.type}: ${JSON.stringify(data, null, 2)}`);
            };
            
            ws.onclose = () => {
                addMessage('âŒ ÄÃ£ ngáº¯t káº¿t ná»‘i');
            };
            
            ws.onerror = (error) => {
                addMessage('ğŸš¨ Lá»—i: ' + error);
            };
        }
        
        function disconnect() {
            if (ws) ws.close();
        }
        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            if (ws && input.value) {
                ws.send(JSON.stringify({
                    type: 'chat',
                    message: input.value,
                    sender: 'Test Client (File KhÃ¡c)'
                }));
                input.value = '';
            }
        }
        
        function sendPing() {
            if (ws) {
                ws.send(JSON.stringify({ type: 'ping' }));
            }
        }
        
        function addMessage(message) {
            const div = document.getElementById('messages');
            div.innerHTML += `<div style="margin:5px 0; font-size:12px;">${new Date().toLocaleTimeString()} - ${message}</div>`;
            div.scrollTop = div.scrollHeight;
        }
        
        // Tá»± Ä‘á»™ng káº¿t ná»‘i khi trang load
        window.onload = function() {
            setTimeout(() => {
                addMessage('ğŸ”„ Äang tá»± Ä‘á»™ng káº¿t ná»‘i Ä‘áº¿n server...');
                connect();
            }, 500);
        };
    </script>
</body>
</html>
